
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Git basics - Nice R Code</title>
  <meta name="author" content="Rich FitzJohn & Daniel Falster">

  
  <meta name="description" content="Git basics 16 April 2013 Rstudio has super simple point-and-click version control (via git) baked in for &#8220;projects&#8221;. No excuses for not &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://nicercode.github.com/git/rstudio.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Nice R Code" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Bitter:400,700,400italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39493992-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Nice R Code</a></h1>
  
    <h2>Punning code better since 2013</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:nicercode.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/guide.html">Guides</a></li>
  <li><a href="/modules">Modules</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">Git basics</h1>
    <p class="meta">








  


<time datetime="2013-04-16T09:00:00+10:00" pubdate data-updated="true">16 April 2013</time></p>
  </header>
  
  <blockquote class="twitter-tweet"><p>Rstudio has super simple point-and-click version control (via git) baked in for &#8220;projects&#8221;. No excuses for not using it! (via @<a href="https://twitter.com/danmcglinn">danmcglinn</a>)</p>&mdash; Rich FitzJohn (@phylorich) <a href="https://twitter.com/phylorich/status/301107009573490688">February 11, 2013</a></blockquote>
<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="baby-steps-with-rstudio">Baby steps with RStudio</h2>

<p>RStudio has git built in, and we’re going to use that to get started.
The set of things you can do with git through RStudio is quite
limited, but if you’re doing your work there already, it will be quite
convenient.</p>

<p>First, make a branch new project (see
<a href="blog/2013-04-05-projects/#setting-up-a-project-in-rstudio">this post</a>,
but essentially Project: Create Project).</p>

<p>Click the “Rproj” file in the “Files” pane, or click Projects:
Projects Options to open the project options.  Select the bottom entry
in the ribbon (Git/SVN), and select Git from the drop-down menu.
RStudio will prompt you to confirm, and then again to restart – click
“Yes” both times.</p>

<p>Now the top right panel has a “Git” tab, which should look like this</p>

<p><img src="img/rstudio-on-init.png" /></p>

<p>The two question marks next to the files indicate that they are not
known to git.</p>

<h3 id="adding-and-committing-files-to-git">Adding and committing files to git</h3>

<p>Make a new R script (say, <code>script.R</code>, imaginatively), and edit it,
perhaps to say:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="c1"># Standard error function</span>
</span><span class="line">se <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span>
</span><span class="line">  sqrt<span class="p">(</span>var<span class="p">(</span>x<span class="p">)</span> <span class="o">/</span> length<span class="p">(</span>x<span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><img src="img/rstudio-not-added.png" /></p>

<p>Our new file is now listed, also with question marks as it also not
known to git.</p>

<p>If you click the check box next to <code>script.R</code>, the two question marks
change to one “A”.  This indicates that the file has been “added”
(specifically, we’ve added it to the staging area, indicating that we
are planning on making that file part of the next revision of the
project).</p>

<p><img src="img/rstudio-added.png" /></p>

<p>This file is still not under version control though; we’ve just
indicated our <em>intention</em> to add it.  Click the “Commit” button (with
the little tick mark) and the “Review Changes” window opens.</p>

<p><img src="img/rstudio-review-changes.png" /></p>

<p>Enter a descriptive message about your change here.  Convention
suggests a one line informative message, which is if necessary
followed by a blank line and a more detailed message if the change
warrants it.  I added the message:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">Added function that computes standard error of the mean.</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The pane on the left indicates the state of your directory (in this
project two “unknown” files and one staged to be commited.  The bottom
pane contains the changes – in this case the entire file is new so
everything is green.</p>

<p>When you are happy, press “Commit”, and a small log window opens up
telling you everything went well.  Mine said:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class=""><span class="line">[master (root-commit) 765f3d6] Added function that computes standard error of the mean
</span><span class="line"> 1 file changed, 3 insertions(+)
</span><span class="line"> create mode 100644 script.R</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Notice that the file we added has been removed from the Git pane.
This is because there are no operations that we might want to do to
update the history of that file (i.e., it is up to date).</p>

<p><img src="img/rstudio-on-init.png" /></p>

<p>There are two other files here; a <code>.gitignore</code> file and a file called
<code>vc.Rproj</code> (or <code>your_project_name.Rproj</code>).  The first is useful for
keeping track of which files we <em>don’t</em> want to keep track of (e.g.,
generated figures, data, etc), and the <code>Rproj</code> file is how RStudio
keeps track of things.  I added these (tick checkboxes, then Commit,
with message <code>Added RStudio files to version control.</code>).</p>

<h3 id="viewing-history">Viewing history</h3>

<p>In the git pane, click “More” (with the small cog) and click
“History”.  This opens up a window also labeled “Review Changes” that
shows the history for the project.</p>

<p><img src="img/rstudio-history.png" /></p>

<p>The two revisions are indicated by the two rows in the top panel, with
the most recent version at the top, and time running backwards down
the list.  You can see the short line added as a commit messages,
along with the author who made the change and the date the change was
made.  The numbers in the far right column are a “SHA hash” – we’ll
talk about these later, but think of it as a fingerprint for that
version.</p>

<p>The bottom panel includes information about the selected version
(versions are also often called commits, so RStudio says “Commits 1-2
of 2”).  This includes the same information more verbosely, then lists
the two files that changed (<code>.gitignore</code> and <code>vc.Rproj</code>) and then the
difference between these and the previous version of the files.
Because this is the first version of the files, everything is new, so
all lines are green.</p>

<h3 id="making-changes">Making changes</h3>

<p>Edit the <code>script.R</code> file to say</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="c1"># Standard error function</span>
</span><span class="line">se <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span>
</span><span class="line">  sqrt<span class="p">(</span>var<span class="p">(</span>x<span class="p">,</span> na.rm<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span> <span class="o">/</span> length<span class="p">(</span>na.omit<span class="p">(</span>x<span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The git pane now shows that <code>script.R</code> has been modified:</p>

<p><img src="img/rstudio-modified.png" /></p>

<p>If you click the check box to stage the file, the “M” moves to the
left to indicate that this change has been staged.  Then commit the
file with an appropriate message, in my case:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">Modified the se function to ignore NA values.</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>If you view the history again, this time you can see red lines
indicating deletions and green lines indicating additions.</p>

<p><img src="img/rstudio-history.png" /></p>


  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013-04-23-git/">git</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013-04-05-why-nice-code/">Why I want to write nice R code</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013-04-05-projects/">Designing projects</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013-03-08-nice-r-code-2013-plans/">Plans for 'Nice R code module', Macquarie University 2013</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013-02-12-r-ecology-evolution/">R in ecology and evolution</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Rich FitzJohn & Daniel Falster -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'nicercode';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://nicercode.github.com/git/rstudio.html';
        var disqus_url = 'http://nicercode.github.com/git/rstudio.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
